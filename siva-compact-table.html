<!--
@license
Copyright (c) 2015 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
-->
<link rel="import" href="../polymer/polymer.html">
<script src="../webcomponentsjs/webcomponents-lite.min.js"></script>
<script src="../../public/javascripts/underscore-min.js"></script>


<!--
An element providing a solution to no problem in particular.

Example:

    <siva-recipe-creation></siva-recipe-creation>

@demo
-->
<dom-module id="siva-compact-table">
  <template>
  <style>
  :host {
    box-sizing: border-box;
  }
  :host .table-header-rotated {
    border-collapse: collapse;
  }
  :host .csstransforms .table-header-rotated td {
    color:blue;
    width: 30px;
  }
  :host .no-csstransforms .table-header-rotated th {
    padding: 5px 10px;
  }
  :host .table-header-rotated td {
    text-align: left;
    padding: 0px 2px;
    border: 1px solid #ccc;
  }
  :host .csstransforms .table-header-rotated th.rotate {
    white-space: nowrap;
    background:gray;
  }
  :host .table-header-rotated th.rotate:not(:first-of-type) > div {
    transform: translate(18px, -7px) rotate(299deg);
    width:30px;
    font-size:12px;
    font-weight:normal;
  }
  :host .table-header-rotated th.rotate > div > span {
    border-bottom: 1px solid #ccc;
  }
  .table-header-rotated th.row-header {
    text-align:left;
    padding: 5px;
    border-bottom: 1px solid #ccc;
    background:#f4f4f4;
    border-top-left-radius:10px;
    box-shadow:2px 3px 1px #ccc;
  }
  </style>

    <table  class="csstransforms table-header-rotated" data$="{{data}}" nutritives$="{{nutritives}}">
      <!-- <tr hidden="{{!data.length}}"><td colspan="7" center-justified flex>Micro Nutrients</td></tr> -->
      <tr hidden="{{!data.length}}" valign="top">
        <!-- First column header is not rotated -->
        <!-- Following headers are rotated -->

        <!--  MICRO Nutrients-->
        <th class="rotate"><div><span>&nbsp;</span></div></th>
        <th class="rotate"><div><span>QUANTITY</span></div></th>
        <th class="rotate"><div><span>UNIT OF MEASURE</span></div></th>
        <th class="rotate"><div><span>CAROTENE_Vit_A_microgram</span></div></th>
        <th class="rotate"><div><span>THIAMINE_Vit_B1_mg</span></div></th>
        <th class="rotate"><div><span>RIBOFLAVIN_VIT_B2_mg</span></div></th>
        <th class="rotate"><div><span>NIACIN_VIT_B3_mg</span></div></th>
        <th class="rotate"><div><span>Folic_Acid_Free</span></div></th>
        <th class="rotate"><div><span>Folic_Acid_Total</span></div></th>
        <th class="rotate"><div><span>CHOLINE_mg</span></div></th>
        <th class="rotate"><div><span>Na_mg</span></div></th>
        <th class="rotate"><div><span>K_mg</span></div></th>
        <th class="rotate"><div><span>Zn_mg</span></div></th>
        <th class="rotate"><div><span>IRON_MG</span></div></th>
        <th class="rotate"><div><span>Total_Saturates_Percent</span></div></th>
        <th class="rotate"><div><span>Total_Monounsaturate_Percent</span></div></th>
        <th class="rotate"><div><span>Total_Polyunsaturate_Percent</span></div></th>

        <!--  MACRO Nutrients-->
        <th class="rotate"><div><span>MOISTURE_GM</span></div></th>
        <th class="rotate"><div><span>PROTEIN_GM</span></div></th>
        <th class="rotate"><div><span>FAT_GM</span></div></th>
        <th class="rotate"><div><span>MINERALS_GM</span></div></th>
        <th class="rotate"><div><span>FIBER_GM</span></div></th>
        <th class="rotate"><div><span>CARBOHYDRATES_GM</span></div></th>
        <th class="rotate"><div><span>ENERGY_KCALS</span></div></th>
        <th class="rotate"><div><span>CALCIUM_MG</span></div></th>
        <th class="rotate"><div><span>PHOSPHOROUS_MG</span></div></th>
      </tr> 
      <tbody>
          <template is="dom-repeat" items="{{data}}">
            <tr valign="top">
              <!--  MICRO Nutrients-->
              <th class="row-header">{{item.NAME}}</th>
              <td class="rotate"><div>{{item.qty}}</div></td>
              <td class="rotate"><div>{{item.uom}}</div></td>
              <td class="rotate"><div>{{item.CAROTENE_Vit_A_microgram}}</div></td>
              <td class="rotate"><div>{{item.THIAMINE_Vit_B1_mg}}</div></td>
              <td class="rotate"><div>{{item.RIBOFLAVIN_VIT_B2_mg}}</div></td>
              <td class="rotate"><div>{{item.NIACIN_VIT_B3_mg}}</div></td>
              <td class="rotate"><div>{{item.Folic_Acid_Free}}</div></td>
              <td class="rotate"><div>{{item.Folic_Acid_Total}}</div></td>
              <td class="rotate"><div>{{item.CHOLINE_mg}}</div></td>
              <td class="rotate"><div>{{item.Na_mg}}</div></td>
              <td class="rotate"><div>{{item.K_mg}}</div></td>
              <td class="rotate"><div>{{item.Zn_mg}}</div></td>
              <td class="rotate"><div>{{item.IRON_MG}}</div></td>
              <td class="rotate"><div>{{item.Total_Saturates_Percent}}</div></td>
              <td class="rotate"><div>{{item.Total_Monounsaturate_Percent}}</div></td>
              <td class="rotate"><div>{{item.Total_Polyunsaturate_Percent}}</div></td>
              
              <!--  MACRO Nutrients-->
              <td class="rotate"><div>{{item.MOISTURE_GM}}</div></td>
              <td class="rotate"><div>{{item.PROTEIN_GM}}</div></td>
              <td class="rotate"><div>{{item.FAT_GM}}</div></td>
              <td class="rotate"><div>{{item.MINERALS_GM}}</div></td>
              <td class="rotate"><div>{{item.FIBER_GM}}</div></td>
              <td class="rotate"><div>{{item.CARBOHYDRATES_GM}}</div></td>
              <td class="rotate"><div>{{item.ENERGY_KCALS}}</div></td>
              <td class="rotate"><div>{{item.CALCIUM_MG}}</div></td>
              <td class="rotate"><div>{{item.PHOSPHOROUS_MG}}</div></td>

            </tr>
          </template>
      </tbody>
    </table>
  </template>
</dom-module>

<script>

  Polymer({

    is: 'siva-compact-table',
    properties:{
      data:Array,
      notify:true
    },
    
    listeners: {
      'clear': 'clearSelfData'
    },
    ready: function() {
      // `ready` is called after all elements have been configured, but
      // propagates bottom-up. This element's children are ready, but parents
      // are not.
      //
      // This is the point where you should make modifications to the DOM (when
      // necessary), or kick off any processes the element wants to perform.
    },

    attached: function() {
      // `attached` fires once the element and its parents have been inserted
      // into a document.
      //
      // This is a good place to perform any work related to your element's
      // visual state or active behavior (measuring sizes, beginning animations,
      // loading resources, etc).
    },

    detached: function() {
      // The analog to `attached`, `detached` fires when the element has been
      // removed from a document.
      //
      // Use this to clean up anything you did in `attached`.
    },
    clearSelfData:function(){
      this.data.length = 0;
    },

    showMicroNutrients: function() {
      return (this.data.length > 0);
    }
  });

</script>
